---
import paypalIcon from '@icons/paypal.svg';
import zoomIcon from '@icons/zoom.svg';
import { Image } from 'astro:assets';
import dayjs from 'dayjs';
import advancedformat from 'dayjs/plugin/advancedFormat';

dayjs.extend(advancedformat);

type Label = {
  text: 'Upcoming' | 'Ongoing' | 'Past';
  color: string;
};

interface Props {
  date?: Date;
  img: string;
  label?: Label;
  link: string;
  title: string[];
  type: 'default' | 'event';
}

const { date, title, img, label, link, type } = Astro.props;
const eventDate = dayjs(date).format('Do of MMMM');
---

<div class="card">
  <a href={link}>
    <div class="picture"></div>
    {type === 'default' && <div class="title">{title}</div>}
    {type === 'event' && (
      <div class="date">{eventDate}</div>
      <div class={`label ${label?.color}`}>{label?.text}</div>
      <div class="event-title">
        <p class="font-light leading-tight">{title[0]}</p>
        <p class="mt-3 font-medium">{title[1]}</p>
        <p class="text-xl c-black font-bold leading-tight">{title[2]}</p>
      </div>
      <div class="event-footer">
        <div class="flex gap-2">
          <Image src={zoomIcon} alt="Zoom icon" />
          <Image src={paypalIcon} alt="Paypal icon" />
        </div>
        <div class="flex items-center text-base hover:underline">
          read more <div class="i-mdi-arrow-right ml-2 text-2xl"></div>
        </div>
      </div>
    )}
  </a>
</div>

<style define:vars={{ backgroundImage: `url(${img})` }}>
  .card {
    @apply relative border-5 border-white rounded-xl shadow-xl h-full overflow-hidden hover:shadow-2xl pb-15;
  }

  .picture {
    background-image: var(--backgroundImage);
    @apply h-60 bg-cover bg-center;
  }

  .title {
    @apply flex min-h-25 items-center justify-center px-10 py-5 text-2xl;
  }

  .date {
    @apply text-right py-1 px-2;
  }

  .label {
    @apply text-right c-white font-medium px-2;
  }

  .event-title {
    @apply px-2 text-right c-neutral-6;
  }

  .event-footer {
    @apply absolute bottom-0 w-full c-neutral-6 flex items-bottom justify-between mt-5 px-2;
  }
</style>
